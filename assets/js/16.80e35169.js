(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{391:function(n,t,i){"use strict";i.r(t);var c=i(1),h=Object(c.a)({},(function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[i("p",[n._v("Chào các bạn. Thời gian WFH cũng là thời gian làm cho con người ta cảm thấy mệt mỏi, tù túng nhất có thể. Nhưng chắc không mệt mỏi bằng việc nhờ người khác review code. Hay phải review code cho một cái PR to tổ bố. Thôi thì cùng mình ngó qua một chút về một vài kinh nghiệm cũng như kiến thức của bản thân mình đã trải qua và tổng hợp lại được nhé.")]),n._v(" "),i("p",[n._v("Như thường lệ, tổng quan bài viết gồm 3 phần như sau")]),n._v(" "),i("ol",[i("li",[n._v("Tổng quan về review code")]),n._v(" "),i("li",[n._v("Review code như thế nào?")]),n._v(" "),i("li",[n._v("Tổng kết")])]),n._v(" "),i("p",[i("strong",[n._v("Một vài từ ngữ viết tắt")])]),n._v(" "),i("ul",[i("li",[n._v("UT = Unit Test")]),n._v(" "),i("li",[n._v("PR = Pull Request")]),n._v(" "),i("li",[n._v("CL = Change Line")])]),n._v(" "),i("h2",{attrs:{id:"tong-quan-ve-review-code"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#tong-quan-ve-review-code"}},[n._v("#")]),n._v(" Tổng quan về review code")]),n._v(" "),i("h3",{attrs:{id:"review-code-la-gi"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#review-code-la-gi"}},[n._v("#")]),n._v(" Review code là gì")]),n._v(" "),i("ul",[i("li",[n._v("Là quá trình mà các lập trình viên xem xét và đánh giá code của một thành viên khác trong nhóm")]),n._v(" "),i("li",[n._v("Đồng thời cũng là quá trình thảo luận, đưa ra những góp ý nhằm giúp các đoạn code thêm chất lượng hơn.\ni"),i("img",{attrs:{src:"https://images.viblo.asia/906110ad-e432-4a38-8113-ba0c2332e2fa.jpg",alt:"4l0h6v.jpg"}})])]),n._v(" "),i("h3",{attrs:{id:"loi-ich-cua-review-code"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#loi-ich-cua-review-code"}},[n._v("#")]),n._v(" Lợi ích của review code")]),n._v(" "),i("p",[i("strong",[n._v("Về cá nhân:")])]),n._v(" "),i("ul",[i("li",[n._v("Nâng cao trình độ bản thân.")]),n._v(" "),i("li",[n._v("Học cách truyền đạt và góp ý cho người khác, cũng như kiểm chứng lại kiến thức của mình.")])]),n._v(" "),i("p",[i("strong",[n._v("Về công việc:")])]),n._v(" "),i("ul",[i("li",[n._v("Nắm bắt được những gì diễn ra trong dự án")]),n._v(" "),i("li",[n._v("Là một bước quan trọng để giảm thiểu lỗi phát sinh")]),n._v(" "),i("li",[n._v("Giúp cho chất lượng code tốt hơn => chất lượng dự án sẽ tốt hơn.")])]),n._v(" "),i("h3",{attrs:{id:"tieu-chuan-chung-cua-review-code"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#tieu-chuan-chung-cua-review-code"}},[n._v("#")]),n._v(" Tiêu chuẩn chung của review code")]),n._v(" "),i("p",[i("strong",[n._v("Chung")]),n._v(":")]),n._v(" "),i("ul",[i("li",[n._v("Đảm bảo rằng tình trạng của toàn bộ codebase được cải thiện theo thời gian")]),n._v(" "),i("li",[n._v("Không có “"),i("strong",[n._v("perfect")]),n._v("” code, chỉ có “"),i("strong",[n._v("better")]),n._v("” code")]),n._v(" "),i("li",[n._v("Technical facts > sở thích cá nhân")])]),n._v(" "),i("p",[i("strong",[n._v("Cá nhân:")])]),n._v(" "),i("ul",[i("li",[n._v("Cần có khả năng học hỏi và tiến bộ đối với từng PR của mình")]),n._v(" "),i("li",[n._v("Cần có trách nhiệm với PR mà mình đã review")]),n._v(" "),i("li",[n._v("Tránh lặp lại các lỗi tương tự")])]),n._v(" "),i("p",[n._v("=> Reviewer nên chấp thuận PR khi nó chắc chắn cải thiện tình hình của codebase, ngay cả khi PR không hoàn hảo")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/9c191024-1ead-4ff6-b555-8afad7660ac0.jpg",alt:"d7vtilcf2rg61.jpg"}})]),n._v(" "),i("h2",{attrs:{id:"review-code-nhu-the-nao"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#review-code-nhu-the-nao"}},[n._v("#")]),n._v(" Review code như thế nào")]),n._v(" "),i("h3",{attrs:{id:"khi-review-code-chung-ta-nhin-vao-nhung-gi"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#khi-review-code-chung-ta-nhin-vao-nhung-gi"}},[n._v("#")]),n._v(" Khi review code chúng ta nhìn vào những gì?")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/30ded9da-83f8-4fad-844a-ebab91d035f8.jpg",alt:"4384a800d27433f17a5518101181433a.jpg"}})]),n._v(" "),i("p",[i("strong",[n._v("Sai lầm phổ biến")])]),n._v(" "),i("ul",[i("li",[n._v("Formatting: Khoảng trắng hay break line ở đâu, dùng tab hay space, …")]),n._v(" "),i("li",[n._v("Style: Khai báo biến ở đâu, truyền params như thế nào?")])]),n._v(" "),i("p",[n._v("Khi review code, chúng ta không nên chú ý vào 2 vấn đề trên, vì về cơ bản các tools đã hỗ trợ chúng ta việc đó, hay tận dụng chúng. Thay vào đó, bản thây mình nghĩ chúng ta nên "),i("strong",[n._v("chú trọng vào các vấn đề sau")])]),n._v(" "),i("ol",[i("li",[n._v("Design")]),n._v(" "),i("li",[n._v("Readability & Maintainability")]),n._v(" "),i("li",[n._v("Functionality")]),n._v(" "),i("li",[n._v("Tests")]),n._v(" "),i("li",[n._v("Performance")]),n._v(" "),i("li",[n._v("Security")])]),n._v(" "),i("h4",{attrs:{id:"_1-desgin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_1-desgin"}},[n._v("#")]),n._v(" 1. Desgin")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/af32ad0c-3d84-4335-9122-725145511afc.png",alt:"1_gpIXyLjxnebMNZpw8KvmUA.png"}})]),n._v(" "),i("ul",[i("li",[n._v("CLs có phù hợp với "),i("strong",[n._v("kiến trúc hiện tại")]),n._v(" của codebase không?")]),n._v(" "),i("li",[n._v("Nếu codebase có nhiều tiêu chuẩn hoặc style khác nhau, thì style của CLs có phù hợp không?")]),n._v(" "),i("li",[n._v("CLs có tuân theo các "),i("strong",[n._v("design pattern")]),n._v(" phù hợp không?")]),n._v(" "),i("li",[n._v("CLs có tuân theo các "),i("strong",[n._v("nguyên tắc cơ bản")]),n._v(" như\n"),i("ul",[i("li",[n._v("SOLID")]),n._v(" "),i("li",[n._v("DDD(Domain Driven Design)")])])]),n._v(" "),i("li",[n._v("CLs có được đặt đúng chỗ không, ví dụ: Liên quan tới Order, thì nó có ở trong Order Services không?")]),n._v(" "),i("li",[n._v("CLs có thể sử dụng lại 1 số function cũ hay không?\n-Liệu CLs có được thiết kế quá mức hay không?")])]),n._v(" "),i("h4",{attrs:{id:"_2-readability-maintainability"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_2-readability-maintainability"}},[n._v("#")]),n._v(" 2. Readability & Maintainability")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/3ca41f58-e092-47ef-bdee-49ebfbcceb76.jpg",alt:"maintainability-is-king.jpg"}})]),n._v(" "),i("ul",[i("li",[n._v("Liệu rằng "),i("strong",[n._v("cách đặt tên")]),n._v(" (của fields, variables, parameters, methods and classes) có dễ hiểu và biểu thị đúng chức năng của nó không?")]),n._v(" "),i("li",[n._v("Khi đọc code, Unit Test bạn có hiểu nó đang làm gì không?")]),n._v(" "),i("li",[i("strong",[n._v("Error message")]),n._v(" có biểu thị đúng hay không?")]),n._v(" "),i("li",[i("strong",[n._v("Comments")]),n._v(" có được viết hợp lý hay không?")]),n._v(" "),i("li",[i("strong",[n._v("Docs")]),n._v(" có được update không?")])]),n._v(" "),i("h4",{attrs:{id:"_3-functionality"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-functionality"}},[n._v("#")]),n._v(" 3. Functionality")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/5dc8277a-686e-4d35-902f-c29cb37227e9.jpg",alt:"Functionality-473x270.jpg"}})]),n._v(" "),i("ul",[i("li",[n._v("Liệu rằng CLs có hoạt động đúng như developer mong muốn hay không?")]),n._v(" "),i("li",[n._v("Có các UT đảm bảo cho việc này hay không?")]),n._v(" "),i("li",[n._v("Liệu rằng có tiềm ẩn những lỗi như, ví dụ: như sử dụng “and” thay vì “or”")])]),n._v(" "),i("h4",{attrs:{id:"_4-tests"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_4-tests"}},[n._v("#")]),n._v(" 4. Tests")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/08f40801-d651-45f5-aa1f-7274adb564e0.png",alt:"Unit-Test-and-Test-Driven-Development-TDD.png"}})]),n._v(" "),i("ul",[i("li",[n._v("Có UT (Unit Test) cho code mới/sửa hay không?")]),n._v(" "),i("li",[n._v("Có UT cho các đoạn logic phức tạp hay không?")]),n._v(" "),i("li",[n._v("Bạn có đang hiểu những gì UT thể hiện không?")]),n._v(" "),i("li",[n._v("Các UT có phù hợp với yêu cầu không?")]),n._v(" "),i("li",[n._v("Các UT có bị miss case nào quan trọng không?")])]),n._v(" "),i("h4",{attrs:{id:"_5-performance"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_5-performance"}},[n._v("#")]),n._v(" 5. Performance")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/d4ec139e-5e09-45c2-85f9-ca382ff59798.jpg",alt:"96412.jpg"}})]),n._v(" "),i("ul",[i("li",[n._v("CLs có ảnh hưởng tiêu cực đến performance hiện tại?")]),n._v(" "),i("li",[n._v("Chú ý tới các vấn đề có thể gây ảnh hưởng đến performance\n"),i("ul",[i("li",[n._v("Gọi tới services khác, timeout")]),n._v(" "),i("li",[n._v("Xử lý với database\n"),i("ul",[i("li",[n._v("N+1 query")]),n._v(" "),i("li",[n._v("Deadlock, …")])])]),n._v(" "),i("li",[n._v("Các vấn đề liên quan tới thread, memory leak, ...")])])])]),n._v(" "),i("h4",{attrs:{id:"_6-security"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_6-security"}},[n._v("#")]),n._v(" 6. Security")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/16eabbdf-9f7d-45a2-9967-8931b25c1151.jpg",alt:"an-ninh-mang-1.jpg"}})]),n._v(" "),i("ul",[i("li",[n._v("Sử dụng tools để check các lỗi bảo mật cơ bản (nếu có thể). Chú ý đến các raw query\n"),i("ul",[i("li",[n._v("SQL Injection")]),n._v(" "),i("li",[n._v("Cross-site Scripting")]),n._v(" "),i("li",[n._v("…")])])]),n._v(" "),i("li",[n._v("Kiểm tra xem các dữ liệu có cần phải được mã hóa")]),n._v(" "),i("li",[n._v("Kiểm tra xem có "),i("strong",[n._v("lộ các key")])])]),n._v(" "),i("p",[i("strong",[n._v("=> Thường thì các framework đã tránh hết các vấn đề bảo mật cơ bản rồi.")])]),n._v(" "),i("h3",{attrs:{id:"lam-the-nao-đe-review-code-tot-hon"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#lam-the-nao-đe-review-code-tot-hon"}},[n._v("#")]),n._v(" Làm thế nào để review code tốt hơn?")]),n._v(" "),i("p",[n._v("**Các bước của quá trình review **\n"),i("img",{attrs:{src:"https://images.viblo.asia/742cc4f4-fbe4-4941-ae90-c7d749cbcf88.jpg",alt:"stepbystep.jpg"}})]),n._v(" "),i("ol",[i("li",[n._v("Nhìn tổng quan 1 lượt các CLs ("),i("strong",[n._v("Change Lines")]),n._v(")")]),n._v(" "),i("li",[n._v("Kiểm tra kỹ các phần chính của CLs")]),n._v(" "),i("li",[n._v("Kiểm tra phần còn lại của CLs theo thứ tự hợp lý")])]),n._v(" "),i("h4",{attrs:{id:"_1-nhin-tong-quan-1-luot-cac-cls"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_1-nhin-tong-quan-1-luot-cac-cls"}},[n._v("#")]),n._v(" 1. Nhìn tổng quan 1 lượt các CLs")]),n._v(" "),i("ul",[i("li",[n._v("Đầu tiên cần hiểu về spec của CLs, và confirm lại với dev xong CLs có khớp với spec không? => "),i("strong",[n._v("Nếu không có thể reject ngay")]),n._v(".")]),n._v(" "),i("li",[n._v("Nếu vấn đề này xảy ra quá thường xuyên => cần xem lại quy trình làm việc của team.")])]),n._v(" "),i("h4",{attrs:{id:"_2-kiem-tra-ky-cac-phan-chinh-cua-cls"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_2-kiem-tra-ky-cac-phan-chinh-cua-cls"}},[n._v("#")]),n._v(" 2. Kiểm tra kỹ các phần chính của CLs")]),n._v(" "),i("ul",[i("li",[n._v("Tìm “"),i("strong",[n._v("main")]),n._v('" files của CLs, thông thường đó là các files có lượng thay đổi logic lớn nhất.')]),n._v(" "),i("li",[n._v("Hãy review thật kỹ phần “main” này trước => cung cấp ngữ cảnh cho tất cả các phần khác của CLs")]),n._v(" "),i("li",[n._v("Nếu CLs quá lớn, có thể đề nghĩ dev tách CLs ra các phần nhỏ")]),n._v(" "),i("li",[n._v("Nếu thấy các vấn đề liên quan đến design => cần phản ánh lại cho dev ngay lập tức.")])]),n._v(" "),i("h4",{attrs:{id:"_3-kiem-tra-phan-con-lai-cua-cls-theo-thu-tu-hop-ly"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-kiem-tra-phan-con-lai-cua-cls-theo-thu-tu-hop-ly"}},[n._v("#")]),n._v(" 3. Kiểm tra phần còn lại của CLs theo thứ tự hợp lý")]),n._v(" "),i("ul",[i("li",[n._v("Hãy cố gắng tìm ra một trình tự hợp lý để reivew qua các CL đồng thời đảm bảo rằng không miss bất kì CL nào.")]),n._v(" "),i("li",[n._v('Thông thường, khi đã xem qua các "'),i("strong",[n._v("main")]),n._v('" CL ⇒ chúng ta chỉ cần xem lại các file theo thứ tự lần lượt mà công cụ review suggest')]),n._v(" "),i("li",[n._v("Đôi khi, cũng hữu ích nếu bạn "),i("strong",[n._v("đọc UT trước khi đọc qua main CLs")]),n._v(" ⇒ giúp bạn nắm được ý tưởng về những thay đổi được cho là đang thực hiện")])]),n._v(" "),i("h3",{attrs:{id:"nhung-chu-y-khi-comments-vao-pr"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#nhung-chu-y-khi-comments-vao-pr"}},[n._v("#")]),n._v(" Những chú ý khi comments vào PR")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/88bd5705-76b8-44d7-806e-49b571bf611e.jpeg",alt:"1_Ypd0z4OhOmegm-WHyGHgxg.jpeg"}})]),n._v(" "),i("ul",[i("li",[i("strong",[n._v("Tôn trọng nhau")]),n._v(", đưa ra những comments mang tính góp ý, xây dựng, nhẹ nhàng.")]),n._v(" "),i("li",[n._v("**Giải thích tại sao? **(Có thể) đưa ra các đề xuất khác nếu không đồng ý với cách giải quyết của developer")]),n._v(" "),i("li",[n._v("Nên cân nhắc việc chỉ ra vấn đề với việc đưa ra hướng dẫn trực tiếp. Vì bên cạnh mục tiêu chính là làm cho CLs tốt nhất, còn mục tiêu khác là nâng cao năng lực của developer.")])]),n._v(" "),i("p",[i("strong",[n._v("CHÚ Ý: CẦN TÔN TRỌNG NHAU KHI REVIEW CODE")])]),n._v(" "),i("h3",{attrs:{id:"nhung-chu-y-cai-thien-toc-đo-review-code"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#nhung-chu-y-cai-thien-toc-đo-review-code"}},[n._v("#")]),n._v(" Những chú ý cải thiện tốc độ review code")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/7bdaa38c-e118-44c5-8d5d-283d55a23428.jpg",alt:"please-sir-code-review-please.jpg"}})]),n._v(" "),i("ul",[i("li",[n._v("Cần đánh giá độ quan trọng của task cần review => đưa ra thời điểm review hợp lý")]),n._v(" "),i("li",[n._v("Nếu không focus vào task nào => nên review ngay sau khi PR được tạo")]),n._v(" "),i("li",[n._v("Cần feedback ngay cho developer khi có comment")]),n._v(" "),i("li",[i("strong",[n._v("Tách nhỏ CLs")]),n._v(" nếu có thể")]),n._v(" "),i("li",[n._v("Mỗi lần review "),i("strong",[n._v("không nên quá 1 tiếng")])]),n._v(" "),i("li",[n._v("Nên xây dựng "),i("strong",[n._v("checklist review")]),n._v(" tránh trường hợp bị miss")])]),n._v(" "),i("p",[n._v("=> Thường thì 1 ngày là thời gian tối đa cần có để review.")]),n._v(" "),i("h2",{attrs:{id:"tong-ket"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#tong-ket"}},[n._v("#")]),n._v(" Tổng kết")]),n._v(" "),i("p",[i("img",{attrs:{src:"https://images.viblo.asia/f34708b1-6c74-4fb6-816f-2a27f426ea94.jpg",alt:"code-review-passed.jpg"}})]),n._v(" "),i("p",[n._v("Bài viêt trên có một vài chú ý mình muốn tóm gọn như sau:")]),n._v(" "),i("ul",[i("li",[n._v("PR cải thiện codebase là có thể chấp nhận")]),n._v(" "),i("li",[n._v("Automation hết mức có thể")]),n._v(" "),i("li",[n._v("Review code với tinh thần tôn trọng, học hỏi lẫn nhau")])]),n._v(" "),i("p",[n._v("Hãy chờ đón phần tiếp theo nhé. Nêu có bất kì thắc mắc gì cần giải đáp, hoặc góp ý cho mình, thì hãy comment ở dưới nhé. Cảm ơn các bạn đã đọc bài viết đến đây.")]),n._v(" "),i("hr"),n._v(" "),i("p",[i("a",{attrs:{href:"https://hoangpn.com",target:"_blank",rel:"noopener noreferrer"}},[n._v("@hoangpn - Better every day!"),i("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=h.exports}}]);